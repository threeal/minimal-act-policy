<mujoco>
    <include file="scene.xml"/>
    <include file="piper_dependencies.xml"/>

    <equality>
        <weld body1="mocap_left" body2="piper_left/link6"  solref="0.01 1" solimp="2 0.99 0.001" />
        <weld body1="mocap_right" body2="piper_right/link6" solref="0.01 1" solimp="2 0.99 0.001" />
    </equality>


    <worldbody>
        <include file="piper_left.xml" />
        <include file="piper_right.xml" />

        <body mocap="true" name="mocap_left" pos="-0.41 0.50 0.21" euler="0 0 0">
            <site pos="0 0 0" size="0.003 0.003 0.03" type="box" name="mocap_left_site1" rgba="1 0 0 1"/>
            <site pos="0 0 0" size="0.003 0.03 0.003" type="box" name="mocap_left_site2" rgba="1 0 0 1"/>
            <site pos="0 0 0" size="0.03 0.003 0.003" type="box" name="mocap_left_site3" rgba="1 0 0 1"/>
        </body>
        <body mocap="true" name="mocap_right" pos="0.41 0.50 0.21" euler="0 0 0">
            <site pos="0 0 0" size="0.003 0.003 0.03" type="box" name="mocap_right_site1" rgba="1 0 0 1"/>
            <site pos="0 0 0" size="0.003 0.03 0.003" type="box" name="mocap_right_site2" rgba="1 0 0 1"/>
            <site pos="0 0 0" size="0.03 0.003 0.003" type="box" name="mocap_right_site3" rgba="1 0 0 1"/>
        </body>

        <body name="box" pos="0.2 0.5 0.05">
            <joint name="red_box_joint" type="free" frictionloss="0.01" />
            <inertial pos="0 0 0" mass="0.05" diaginertia="0.002 0.002 0.002" />
            <geom condim="4" solimp="2 1 0.01" solref="0.01 1" friction="1 0.005 0.0001" pos="0 0 0" size="0.02 0.02 0.02" type="box" name="red_box" rgba="1 0 0 1" />
        </body>

    </worldbody>

    <actuator>
        <position name="piper_left/joint7" ctrllimited="true" ctrlrange="0 0.0475" joint="piper_left/joint7" kp="10000" user="1" forcelimited="false"/>
        <position name="piper_left/joint8" ctrllimited="true" ctrlrange="-0.0475 0" joint="piper_left/joint8" kp="10000" user="1" forcelimited="false"/>

        <position name="piper_right/joint7" ctrllimited="true" ctrlrange="0 0.0475" joint="piper_right/joint7" kp="10000" user="1" forcelimited="false"/>
        <position name="piper_right/joint8" ctrllimited="true" ctrlrange="-0.0475 0" joint="piper_right/joint8" kp="10000" user="1" forcelimited="false"/>
    </actuator>

</mujoco>